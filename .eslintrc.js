const OFF = 'off';
const ERR = 'error';
const WARN = 'warn';

const options = {
	arrBrcNl:     [ERR, 'consistent'],
	arrElmNl:     [ERR, 'consistent'],
	braceSt:      [ERR, '1tbs', { allowSingleLine: true }],
	CaptCom:      [ERR, 'always'],
	commaDngl:    [ERR, 'always-multiline'],
	complex:      [WARN, 10],
	curly:        [ERR, 'multi-line'],
	dotLoc:       [ERR, 'object'],
	eqeqeq:       [ERR, 'always', { null: 'ignore' }],
	fnCallArgNl:  [ERR, 'consistent'],
	fnParenNl:    [ERR, 'multiline'],
	genStarSpc:   [ERR, 'after'],
	GrpAccPairs:  [ERR, 'getBeforeSet'],
	keySpc:       [ERR, { align: 'value' }],
	lnStyle:      [ERR, 'unix'],
	maxStmtPLn:   [ERR, { max: 1 }],
	MulLnTern:    [ERR, 'always-multiline'],
	constCond:    [ERR, { checkLoops: false }],
	emptyFn:      [ERR, { allow: ['constructors'] }],
	useB4Def:     [ERR, 'nofunc'],
	objCurlySpc:  [ERR, 'always'],
	objSH:        [ERR, 'consistent-as-needed'],
	oneVar:       [ERR, 'never'],
	opLnBrk:      [ERR, 'after'],
	padBlc:       [ERR, 'never'],
	quoteProps:   [ERR, 'consistent-as-needed'],
	quotes:       [ERR, 'single'],
	semi:         [ERR, 'always'],
	spcCom:       [ERR, 'always'],
	yieldStarSpc: [ERR, 'after'],
	fnStyle:      [ERR, 'declaration', { allowArrowFunctions: true }],
	indent:       [ERR, 'tab', { SwitchCase: 1 }],


	lnArCom: [ERR, {
		beforeBlockComment: true,
		allowBlockStart:    true,
		allowObjectStart:   true,
		allowArrayStart:    true,
	}],

	lnBtwClsMem: [ERR, 'always', {
		exceptAfterSingleLine: true,
	}],

	extraParen: [ERR, 'all', {
		nestedBinaryExpressions: true,
	}],

	plusplus: [ERR, {
		allowForLoopAfterthoughts: true,
	}],

	mulSpc: [ERR, {
		exceptions: {
			Property: true,
		},
	}],

	padLnBtwStmt: [
		ERR,
		{ blankLine: 'always', prev: '*', next: '*' },

		{ blankLine: 'never', prev: '*', next: 'block-like' },
		// Fix singleline if interpreted as multiline-if
		{ blankLine: 'any', prev: '*', next: 'if' },
		{ blankLine: 'always', prev: '*', next: 'multiline-block-like' },
		{ blankLine: 'never', prev: '*', next: 'singleline-const' },
		{ blankLine: 'never', prev: '*', next: 'singleline-let' },
		{ blankLine: 'never', prev: '*', next: 'singleline-var' },
		{ blankLine: 'never', prev: '*', next: 'expression' },
		{ blankLine: 'always', prev: '*', next: 'multiline-expression' },
		{ blankLine: 'never', prev: '*', next: 'empty' },
		{ blankLine: 'never', prev: '*', next: 'directive' },
		{ blankLine: 'never', prev: '*', next: 'break' },
		{ blankLine: 'never', prev: '*', next: 'continue' },
		{ blankLine: 'never', prev: '*', next: 'debugger' },
		{ blankLine: 'never', prev: '*', next: 'throw' },

		{ blankLine: 'always', prev: 'import', next: '*' },
		{ blankLine: 'always', prev: 'export', next: '*' },
		{ blankLine: 'always', prev: 'cjs-import', next: '*' },
		{ blankLine: 'always', prev: 'cjs-export', next: '*' },
		{ blankLine: 'never', prev: 'import', next: 'import' },
		{ blankLine: 'never', prev: 'export', next: 'export' },
		{ blankLine: 'never', prev: 'cjs-import', next: 'cjs-import' },
		{ blankLine: 'never', prev: 'cjs-export', next: 'cjs-export' },
		{ blankLine: 'always', prev: 'multiline-block-like', next: '*' },
		{ blankLine: 'always', prev: 'multiline-const', next: '*' },
		{ blankLine: 'always', prev: 'multiline-let', next: '*' },
		{ blankLine: 'always', prev: 'multiline-var', next: '*' },
		{ blankLine: 'always', prev: 'multiline-expression', next: '*' },
		{ blankLine: 'always', prev: 'block', next: '*' },
		{ blankLine: 'never', prev: 'case', next: '*' },
		{ blankLine: 'never', prev: 'default', next: '*' },
		{ blankLine: 'always', prev: 'return', next: '*' },
	],
};

module.exports = {
	root:    true,
	parser:  '@typescript-eslint/parser',
	plugins: ['@typescript-eslint'],
	// Options: options,

	env: {
		commonjs: true,
		es2020:   true,
		node:     true,
		browser:  true,
	},
	extends: [
		'eslint:recommended',
		'plugin:@typescript-eslint/eslint-recommended',
		'plugin:@typescript-eslint/recommended',
	],
	parserOptions: {
		ecmaVersion: 11,
		project:     './tsconfig-eslint.json',
		options:     options,
	},
	rules: {
		'@typescript-eslint/brace-style':                 options.braceSt,
		'@typescript-eslint/comma-spacing':               ERR,
		'@typescript-eslint/default-param-last':          ERR,
		'@typescript-eslint/dot-notation':                ERR,
		'@typescript-eslint/func-call-spacing':           ERR,
		'@typescript-eslint/indent':                      OFF,
		'@typescript-eslint/init-declarations':           OFF,
		'@typescript-eslint/keyword-spacing':             ERR,
		'@typescript-eslint/lines-between-class-members': options.lnBtwClsMem,
		'@typescript-eslint/no-array-constructor':        ERR,
		'@typescript-eslint/no-empty-function':           options.emptyFn,
		'@typescript-eslint/no-explicit-any':             OFF,
		'@typescript-eslint/no-extra-parens':             options.extraParen,
		'@typescript-eslint/no-invalid-this':             ERR,
		'@typescript-eslint/no-magic-numbers':            OFF,
		'@typescript-eslint/no-namespace':                OFF,
		'@typescript-eslint/no-unused-expressions':       ERR,
		'@typescript-eslint/no-use-before-define':        options.useB4Def,
		'@typescript-eslint/no-useless-constructor':      ERR,
		'@typescript-eslint/quotes':                      options.quotes,
		'@typescript-eslint/require-await':               ERR,
		'@typescript-eslint/semi':                        options.semi,
		'@typescript-eslint/space-before-function-paren': ERR,
		'accessor-pairs':                                 ERR,
		'array-bracket-newline':                          options.arrBrcNl,
		'array-bracket-spacing':                          ERR,
		'array-callback-return':                          ERR,
		'array-element-newline':                          options.arrElmNl,
		'arrow-body-style':                               ERR,
		'arrow-parens':                                   ERR,
		'arrow-spacing':                                  ERR,
		'block-spacing':                                  ERR,
		'brace-style':                                    OFF,
		'camelcase':                                      ERR,
		'capitalized-comments':                           options.CaptCom,
		'comma-dangle':                                   options.commaDngl,
		'comma-spacing':                                  OFF,
		'comma-style':                                    ERR,
		'complexity':                                     options.complex,
		'computed-property-spacing':                      ERR,
		'consistent-return':                              ERR,
		'consistent-this':                                ERR,
		'curly':                                          options.curly,
		'default-case-last':                              ERR,
		'default-case':                                   ERR,
		'default-param-last':                             OFF,
		'dot-location':                                   options.dotLoc,
		'dot-notation':                                   OFF,
		'eol-last':                                       ERR,
		'eqeqeq':                                         options.eqeqeq,
		'func-call-spacing':                              OFF,
		'func-name-matching':                             ERR,
		'func-names':                                     ERR,
		'func-style':                                     options.fnStyle,
		'function-call-argument-newline':                 options.fnCallArgNl,
		'function-paren-newline':                         options.fnParenNl,
		'generator-star-spacing':                         options.genStarSpc,
		'grouped-accessor-pairs':                         options.GrpAccPairs,
		'guard-for-in':                                   ERR,
		'id-blacklist':                                   OFF,
		'id-length':                                      ERR,
		'id-match':                                       OFF,
		'implicit-arrow-linebreak':                       ERR,
		'indent':                                         options.indent,
		'init-declarations':                              OFF,
		'jsx-quotes':                                     ERR,
		'keyword-spacing':                                OFF,
		'line-comment-position':                          ERR,
		'linebreak-style':                                options.lnStyle,
		'lines-around-comment':                           options.lnArCom,
		'lines-between-class-members':                    OFF,
		'max-classes-per-file':                           OFF,
		'max-depth':                                      ERR,
		'max-len':                                        ERR,
		'max-lines-per-function':                         OFF,
		'max-lines':                                      OFF,
		'max-nested-callbacks':                           ERR,
		'max-params':                                     OFF,
		'max-statements-per-line':                        options.maxStmtPLn,
		'max-statements':                                 OFF,
		'multiline-comment-style':                        ERR,
		'multiline-ternary':                              options.MulLnTern,
		'new-cap':                                        ERR,
		'new-parens':                                     ERR,
		'no-alert':                                       ERR,
		'no-array-constructor':                           OFF,
		'no-caller':                                      ERR,
		'no-confusing-arrow':                             ERR,
		'no-constant-condition':                          options.constCond,
		'no-constructor-return':                          ERR,
		'no-continue':                                    ERR,
		'no-div-regex':                                   ERR,
		'no-dupe-class-members':                          OFF,
		'no-duplicate-imports':                           ERR,
		'no-else-return':                                 ERR,
		'no-empty-function':                              OFF,
		'no-eq-null':                                     OFF,
		'no-eval':                                        ERR,
		'no-extend-native':                               ERR,
		'no-extra-bind':                                  ERR,
		'no-extra-parens':                                OFF,
		'no-extra-semi':                                  OFF,
		'no-fallthrough':                                 ERR,
		'no-floating-decimal':                            ERR,
		'no-implicit-coercion':                           ERR,
		'no-implicit-globals':                            OFF,
		'no-implied-eval':                                ERR,
		'no-inline-comments':                             ERR,
		'no-invalid-this':                                OFF,
		'no-iterator':                                    ERR,
		'no-labels':                                      ERR,
		'no-lone-blocks':                                 ERR,
		'no-lonely-if':                                   ERR,
		'no-loop-func':                                   ERR,
		'no-loss-of-precision':                           ERR,
		'no-magic-numbers':                               OFF,
		'no-mixed-operators':                             ERR,
		'no-multi-assign':                                ERR,
		'no-multi-spaces':                                options.mulSpc,
		'no-multi-str':                                   ERR,
		'no-multiple-empty-lines':                        ERR,
		'no-negated-condition':                           ERR,
		'no-nested-ternary':                              ERR,
		'no-new-func':                                    ERR,
		'no-new-object':                                  ERR,
		'no-new-wrappers':                                ERR,
		'no-new':                                         ERR,
		'no-octal-escape':                                ERR,
		'no-octal':                                       ERR,
		'no-param-reassign':                              ERR,
		'no-plusplus':                                    options.plusplus,
		'no-proto':                                       ERR,
		'no-redeclare':                                   ERR,
		'no-restricted-exports':                          OFF,
		'no-restricted-globals':                          OFF,
		'no-restricted-imports':                          OFF,
		'no-restricted-properties':                       OFF,
		'no-restricted-syntax':                           OFF,
		'no-return-assign':                               ERR,
		'no-return-await':                                ERR,
		'no-script-url':                                  ERR,
		'no-self-compare':                                ERR,
		'no-sequences':                                   ERR,
		'no-shadow':                                      OFF,
		'no-tabs':                                        OFF,
		'no-template-curly-in-string':                    ERR,
		'no-ternary':                                     OFF,
		'no-throw-literal':                               ERR,
		'no-trailing-spaces':                             ERR,
		'no-undef-init':                                  ERR,
		'no-underscore-dangle':                           ERR,
		'no-unneeded-ternary':                            ERR,
		'no-unused-expressions':                          OFF,
		'no-unused-vars':                                 OFF,
		'no-use-before-define':                           OFF,
		'no-useless-backreference':                       ERR,
		'no-useless-call':                                ERR,
		'no-useless-computed-key':                        OFF,
		'no-useless-concat':                              ERR,
		'no-useless-constructor':                         OFF,
		'no-useless-rename':                              ERR,
		'no-var':                                         ERR,
		'no-void':                                        ERR,
		'no-warning-comments':                            ERR,
		'no-whitespace-before-property':                  ERR,
		'nonblock-statement-body-position':               ERR,
		'object-curly-spacing':                           options.objCurlySpc,
		'object-shorthand':                               options.objSH,
		'one-var-declaration-per-line':                   ERR,
		'one-var':                                        options.oneVar,
		'operator-assignment':                            ERR,
		'operator-linebreak':                             options.opLnBrk,
		'padded-blocks':                                  options.padBlc,
		'padding-line-between-statements':                options.padLnBtwStmt,
		'prefer-arrow-callback':                          ERR,
		'prefer-const':                                   ERR,
		'prefer-destructuring':                           OFF,
		'prefer-exponentiation-operator':                 ERR,
		'prefer-numeric-literals':                        ERR,
		'prefer-object-spread':                           ERR,
		'prefer-promise-reject-errors':                   ERR,
		'prefer-rest-params':                             ERR,
		'prefer-spread':                                  ERR,
		'prefer-template':                                ERR,
		'quote-props':                                    options.quoteProps,
		'quotes':                                         OFF,
		'radix':                                          ERR,
		'require-atomic-updates':                         ERR,
		'require-await':                                  OFF,
		'require-unicode-regexp':                         ERR,
		'rest-spread-spacing':                            ERR,
		'return-await':                                   OFF,
		'semi-spacing':                                   ERR,
		'semi-style':                                     ERR,
		'semi':                                           OFF,
		'sort-imports':                                   ERR,
		'sort-keys':                                      OFF,
		'sort-vars':                                      ERR,
		'space-before-blocks':                            ERR,
		'space-before-function-paren':                    OFF,
		'space-in-parens':                                ERR,
		'space-infix-ops':                                ERR,
		'space-unary-ops':                                ERR,
		'spaced-comment':                                 options.spcCom,
		'strict':                                         ERR,
		'switch-colon-spacing':                           ERR,
		'symbol-description':                             ERR,
		'template-curly-spacing':                         ERR,
		'template-tag-spacing':                           ERR,
		'unicode-bom':                                    ERR,
		'wrap-iife':                                      ERR,
		'wrap-regex':                                     ERR,
		'yield-star-spacing':                             options.yieldStarSpc,
		'yoda':                                           ERR,
		// This might change.
		'key-spacing':                                    options.keySpc,
		// While(true) is affected.
		'no-unmodified-loop-condition':                   OFF,
		// This might collide with no-else-return.
		'no-useless-return':                              ERR,
		// Required support is 90%.
		'prefer-named-capture-group':                     OFF,
		'vars-on-top':                                    ERR,
		// I just dont know.
		'no-undefined':                                   ERR,
		'no-label-var':                                   ERR,
		// There are some stuff that needs to be checked.
		'newline-per-chained-call':                       ERR,
		// I can't seem to find a good configuration.
		'object-curly-newline':                           OFF,
		// I can't seem to find a good configuration.
		'object-property-newline':                        OFF,
	},
};
